<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8"/>
    <title>Kloud Notes MVP</title>
  </head>
  <body>
    <h1>Kloud Notes MVP</h1>

    <input id="title" placeholder="Titel" />
    <br/>
    <textarea id="content" placeholder="Deine Notiz..."></textarea>
    <br/>
    <button id="saveBtn">Speichern</button>

    <h2>Gespeicherte Notizen:</h2>
    <ul id="notesList"></ul>

    <script type="module">
      // Diese Config kopierst du aus Firebase Console → Web App
      const firebaseConfig = {
        apiKey: "…",
        authDomain: "…",
        projectId: "kloudnotes-478113"
      };

      import { initializeApp } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-app.js";
      import {
        getFirestore,
        collection,
        addDoc,
        onSnapshot,
        orderBy,
        query,
        serverTimestamp
      } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-firestore.js";

      const app = initializeApp(firebaseConfig);
      const db = getFirestore(app);

      const notesCol = collection(db, "notes");

      document.getElementById("saveBtn").onclick = async () => {
        await addDoc(notesCol, {
          title: document.getElementById("title").value,
          content: document.getElementById("content").value,
          createdAt: serverTimestamp(),
        });
      };

      const notesList = document.getElementById("notesList");
      const q = query(notesCol, orderBy("createdAt", "desc"));

      onSnapshot(q, (snapshot) => {
        notesList.innerHTML = "";
        snapshot.forEach((d) => {
          const li = document.createElement("li");
          li.textContent = d.data().title + ": " + d.data().content;
          notesList.appendChild(li);
        });
      });
    </script>
  </body>
</html>